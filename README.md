# github-action-auto-pull-request

Updates a file according to provided template and creates pull request for this change

## Inputs

| Name            | Description            |
| --------------- | ---------------------- |
| `repository`    | destination repo       |
| `branch`        | destination branch     |
| `file_path`     | file to create/change  |
| `file_template` | file content           |
| `message`       | pull request message   |
| `labels`        | pull request labels    |
| `reviewers`     | pull request reviewers |

See [`hub pull-request` command docs](https://hub.github.com/hub-pull-request.1.html) for more details

## Usage example

```yaml
- name: update k8s manifest
  uses: SUNx2YCH/github-action-auto-pull-request@v1.0.0
  env:
    GITHUB_TOKEN: ${{ secrets.ACCESS_TOKEN }}
  with:
    repository: "example/gitops-repo"
    branch: "${{ github.event.repository.name }}-${{ github.sha }}"
    file_path: "some-service/overlays/staging/deployment-patch.yaml"
    file_template: |
      # auto-generated by "${{ github.workflow }}" workflow in ${{ github.repository }}
      <...>
      containers:
        - image: "${{ env.IMAGE_REF }}"  # comes from a previous step
    message: "Update ${{ github.event.repository.name }} version"
    labels: auto-commit
    reviewers: user1,user2
```
